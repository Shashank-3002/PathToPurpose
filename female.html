<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habits Tracker â€” Productivity Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #ff6b6b, #ff57b5);
            color: #fff;
        }

        .card {
            background: rgba(255, 255, 255, 0.06);
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center py-12 px-4">
    <div class="w-full max-w-2xl rounded-2xl p-8 shadow-2xl text-center card">
        <h1 class="text-3xl font-bold mb-2">Habits Tracker</h1>
        <p class="text-sm mb-6">Quickly add habits and mark them done daily. Your progress is saved in this browser.</p>

        <div class="flex gap-2 justify-center mb-4">
            <input id="newHabit" placeholder="Add a habit (e.g., Read 20 mins)" class="w-2/3 p-2 rounded text-black">
            <button id="addHabit" class="bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded">Add</button>
        </div>

        <ul id="habitList" class="space-y-3 text-left max-h-64 overflow-auto p-3"></ul>

        <div class="mt-6 text-sm text-pink-100">Streaks and completion are stored locally. Clear browser data to reset.
        </div>
    </div>

    <script>
        const listEl = document.getElementById('habitList');
        const addBtn = document.getElementById('addHabit');
        const input = document.getElementById('newHabit');

        let habits = JSON.parse(localStorage.getItem('habits_v1') || '[]');

        function save() {
            localStorage.setItem('habits_v1', JSON.stringify(habits));
        }

        function render() {
            listEl.innerHTML = '';
            habits.forEach((h, idx) => {
                const li = document.createElement('li');
                li.className = 'flex items-center justify-between p-3 rounded bg-white/5';

                const left = document.createElement('div');
                left.innerHTML = `<div class=\"font-semibold\">${h.title}</div><div class=\"text-xs text-pink-200\">Streak: ${h.streak || 0}</div>`;

                const right = document.createElement('div');
                right.className = 'flex items-center gap-2';
                const btn = document.createElement('button');
                btn.className = 'py-1 px-3 rounded bg-pink-600 hover:bg-pink-700 text-white text-sm';
                btn.textContent = h.doneToday ? 'Done' : 'Mark';
                btn.addEventListener('click', () => {
                    h.doneToday = !h.doneToday;
                    if (h.doneToday) {
                        h.streak = (h.streak || 0) + 1;
                    } else {
                        h.streak = Math.max(0, (h.streak || 0) - 1);
                    }
                    save();
                    render();
                });

                const del = document.createElement('button');
                del.className = 'py-1 px-3 rounded bg-red-600 hover:bg-red-700 text-white text-sm';
                del.innerHTML = '<i class="fas fa-trash"></i>';
                del.addEventListener('click', () => {
                    habits.splice(idx, 1);
                    save();
                    render();
                });

                right.appendChild(btn);
                right.appendChild(del);
                li.appendChild(left);
                li.appendChild(right);
                listEl.appendChild(li);
            });
        }

        addBtn.addEventListener('click', () => {
            const val = input.value.trim();
            if (!val) return;
            habits.push({ title: val, doneToday: false, streak: 0 });
            input.value = '';
            save();
            render();
        });

        // simple daily reset at midnight local time
        function dailyResetIfNeeded() {
            const last = localStorage.getItem('habits_last_reset');
            const today = new Date().toDateString();
            if (last !== today) {
                habits.forEach(h => { h.doneToday = false; });
                localStorage.setItem('habits_last_reset', today);
                save();
                render();
            }
        }

        dailyResetIfNeeded();
        render();
    </script>
</body>

</html>