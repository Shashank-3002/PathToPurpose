<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pomodoro Timer â€” Productivity Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(135deg, #071029, #0f172a);
            color: #e6eef8;
        }

        .timer-circle {
            width: 260px;
            height: 260px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.04), transparent),
                rgba(255, 255, 255, 0.02);
        }

        .big {
            font-size: 3.5rem;
            font-weight: 700;
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center py-12 px-4">
    <div class="w-full max-w-2xl bg-white/5 rounded-2xl p-8 shadow-2xl text-center">
        <h1 class="text-3xl font-bold mb-2">Pomodoro Timer</h1>
        <p class="text-sm text-slate-300 mb-6">Work in focused intervals with short breaks to maximize productivity.
        </p>

        <div class="flex gap-4 justify-center mb-6">
            <div class="flex flex-col items-center">
                <label class="text-xs text-slate-300">Work (min)</label>
                <input id="workMin" type="number" min="1" value="25"
                    class="w-20 mt-1 p-2 rounded bg-white/5 text-center text-white">
            </div>
            <div class="flex flex-col items-center">
                <label class="text-xs text-slate-300">Short Break (min)</label>
                <input id="shortMin" type="number" min="1" value="5"
                    class="w-20 mt-1 p-2 rounded bg-white/5 text-center text-white">
            </div>
            <div class="flex flex-col items-center">
                <label class="text-xs text-slate-300">Long Break (min)</label>
                <input id="longMin" type="number" min="1" value="15"
                    class="w-20 mt-1 p-2 rounded bg-white/5 text-center text-white">
            </div>
        </div>

        <div class="mx-auto timer-circle mb-6">
            <div>
                <div id="phase" class="text-sm text-slate-300 mb-2">Work</div>
                <div id="timeDisplay" class="big">25:00</div>
            </div>
        </div>

        <div class="flex justify-center gap-4">
            <button id="startBtn"
                class="bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded">Start</button>
            <button id="pauseBtn"
                class="bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-6 rounded">Pause</button>
            <button id="resetBtn"
                class="bg-red-600 hover:bg-red-700 text-white py-2 px-6 rounded">Reset</button>
        </div>

        <p class="text-xs text-slate-400 mt-4">Tip: Use headphones for better focus. Close this tab to pause the
            timer.</p>
    </div>

    <audio id="bell" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>

    <script>
        const workInput = document.getElementById('workMin');
        const shortInput = document.getElementById('shortMin');
        const longInput = document.getElementById('longMin');
        const timeDisplay = document.getElementById('timeDisplay');
        const phaseLabel = document.getElementById('phase');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const bell = document.getElementById('bell');

        let timer = null;
        let remaining = 25 * 60;
        let mode = 'work';
        let running = false;

        function updateDisplay() {
            const m = Math.floor(remaining / 60).toString().padStart(2, '0');
            const s = Math.floor(remaining % 60).toString().padStart(2, '0');
            timeDisplay.textContent = `${m}:${s}`;
            phaseLabel.textContent = mode === 'work' ? 'Work' : mode === 'short' ? 'Short Break' : 'Long Break';
        }

        function setDurations() {
            const work = Math.max(1, parseInt(workInput.value || 25));
            const short = Math.max(1, parseInt(shortInput.value || 5));
            const long = Math.max(1, parseInt(longInput.value || 15));
            return { work, short, long };
        }

        function startTimer() {
            if (running) return;
            running = true;
            timer = setInterval(() => {
                remaining -= 1;
                if (remaining <= 0) {
                    bell.play();
                    // cycle phases
                    if (mode === 'work') {
                        // after 4 work cycles, long break
                        workCycles += 1;
                        if (workCycles % 4 === 0) { mode = 'long'; remaining = setDurations().long * 60; }
                        else { mode = 'short'; remaining = setDurations().short * 60; }
                    } else {
                        mode = 'work'; remaining = setDurations().work * 60;
                    }
                }
                updateDisplay();
            }, 1000);
        }

        function pauseTimer() {
            running = false;
            clearInterval(timer);
            timer = null;
        }

        function resetTimer() {
            pauseTimer();
            mode = 'work';
            workCycles = 0;
            remaining = setDurations().work * 60;
            updateDisplay();
        }

        let workCycles = 0;

        // initialize
        remaining = setDurations().work * 60;
        updateDisplay();

        startBtn.addEventListener('click', startTimer);
        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);

        // update display when durations changed
        [workInput, shortInput, longInput].forEach(i => i.addEventListener('change', () => {
            if (!running) { remaining = setDurations().work * 60; updateDisplay(); }
        }));

        // visibility: pause when hidden (optional)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && running) { pauseTimer(); }
        });
    </script>
</body>

</html>