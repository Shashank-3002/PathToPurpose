<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goals Planner â€” Productivity Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(135deg, #6a0dad, #9b59b6);
            color: #fff;
        }

        .card {
            background: rgba(0, 0, 0, 0.25);
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center py-12 px-4">
    <div class="w-full max-w-3xl rounded-2xl p-8 shadow-2xl card">
        <h1 class="text-3xl font-bold mb-2">Goals Planner</h1>
        <p class="text-sm mb-6">Capture goals, split them into actionable steps, and track your progress over time.
        </p>

        <div class="flex gap-2 mb-4">
            <input id="goalTitle" placeholder="New goal title" class="flex-1 p-2 rounded text-black">
            <button id="addGoal"
                class="bg-purple-700 hover:bg-purple-800 text-white py-2 px-4 rounded">Add Goal</button>
        </div>

        <div id="goalsContainer" class="space-y-4"></div>
    </div>

    <script>
        const container = document.getElementById('goalsContainer');
        const addGoalBtn = document.getElementById('addGoal');
        const goalTitleInput = document.getElementById('goalTitle');

        let goals = JSON.parse(localStorage.getItem('goals_v1') || '[]');

        function save() {
            localStorage.setItem('goals_v1', JSON.stringify(goals));
        }

        function render() {
            container.innerHTML = '';
            goals.forEach((gIdx) => { });
            goals.forEach((g, idx) => {
                const div = document.createElement('div');
                div.className = 'p-4 rounded bg-white/5';

                const title = document.createElement('div');
                title.className = 'flex items-center justify-between mb-2';
                title.innerHTML = `<div class=\"font-semibold text-lg\">${g.title}</div>`;

                const progress = document.createElement('div');
                const totalSteps = g.steps.length || 0;
                const doneSteps = g.steps.filter(s => s.done).length;
                const pct = totalSteps === 0 ? 0 : Math.round((doneSteps / totalSteps) * 100);
                progress.innerHTML = `<div class=\"text-xs mb-1\">Progress: ${pct}%</div><div class=\"w-full bg-white/10 rounded h-2\"><div style=\"width:${pct}%\" class=\"h-2 bg-green-400 rounded\"></div></div>`;

                const stepsList = document.createElement('ul');
                stepsList.className = 'mt-3 space-y-2';
                g.steps.forEach((s, sIdx) => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center justify-between p-2 rounded bg-white/5';
                    const left = document.createElement('div');
                    left.innerHTML = `<label class=\"flex items-center gap-2\"><input type=\"checkbox\" ${s.done ? 'checked' : ''}><span class=\"ml-2\">${s.title}</span></label>`;
                    left.querySelector('input').addEventListener('change', (e) => {
                        g.steps[sIdx].done = e.target.checked;
                        save();
                        render();
                    });

                    const right = document.createElement('div');
                    right.innerHTML = `<button class=\"text-xs bg-red-600 hover:bg-red-700 text-white py-1 px-2 rounded\">Delete</button>`;
                    right.querySelector('button').addEventListener('click', () => {
                        g.steps.splice(sIdx, 1);
                        save();
                        render();
                    });

                    li.appendChild(left);
                    li.appendChild(right);
                    stepsList.appendChild(li);
                });

                const addStepRow = document.createElement('div');
                addStepRow.className = 'mt-3 flex gap-2';
                const stepInput = document.createElement('input');
                stepInput.placeholder = 'Add step (e.g., Draft outline)';
                stepInput.className = 'flex-1 p-2 rounded text-black';
                const addStepBtn = document.createElement('button');
                addStepBtn.className = 'bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded';
                addStepBtn.textContent = 'Add Step';
                addStepBtn.addEventListener('click', () => {
                    const v = stepInput.value.trim();
                    if (!v) return;
                    g.steps.push({ title: v, done: false });
                    stepInput.value = '';
                    save();
                    render();
                });

                const delGoalBtn = document.createElement('button');
                delGoalBtn.className = 'mt-3 bg-red-600 hover:bg-red-700 text-white py-2 px-3 rounded';
                delGoalBtn.textContent = 'Delete Goal';
                delGoalBtn.addEventListener('click', () => {
                    goals.splice(idx, 1);
                    save();
                    render();
                });

                div.appendChild(title);
                div.appendChild(progress);
                div.appendChild(stepsList);
                div.appendChild(addStepRow);
                addStepRow.appendChild(stepInput);
                addStepRow.appendChild(addStepBtn);
                div.appendChild(delGoalBtn);

                container.appendChild(div);
            });
        }

        addGoalBtn.addEventListener('click', () => {
            const t = goalTitleInput.value.trim();
            if (!t) return;
            goals.push({ title: t, steps: [] });
            goalTitleInput.value = '';
            save();
            render();
        });

        render();
    </script>
</body>

</html>